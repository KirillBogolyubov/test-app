{"ast":null,"code":"import { ref, computed } from 'vue';\n// import EventLog from './components/EventLog.vue'\n\nexport default {\n  components: {\n    // EventLog\n  },\n  setup() {\n    const price = ref(0);\n    const quantity = ref(0);\n    const amount = ref(0);\n    const counter = ref(0);\n    const events = ref([]);\n    let debounceTimer = null;\n    const localStorageState = computed(() => {\n      return JSON.parse(localStorage.getItem('formData') || '{}');\n    });\n\n    // Calculate dependent fields\n    const calculateFields = changedField => {\n      if (changedField === 'price') {\n        if (quantity.value) {\n          amount.value = price.value * quantity.value;\n        } else if (amount.value) {\n          quantity.value = amount.value / price.value;\n        }\n      } else if (changedField === 'quantity') {\n        if (price.value) {\n          amount.value = price.value * quantity.value;\n        } else if (amount.value) {\n          price.value = amount.value / quantity.value;\n        }\n      } else if (changedField === 'amount') {\n        if (price.value) {\n          quantity.value = amount.value / price.value;\n        } else if (quantity.value) {\n          price.value = amount.value / quantity.value;\n        }\n      }\n    };\n\n    // Debounce input changes\n    const debounceInput = field => {\n      clearTimeout(debounceTimer);\n      debounceTimer = setTimeout(() => {\n        calculateFields(field);\n        logEvent(`Изменено поле: ${field}`, {\n          price: price.value,\n          quantity: quantity.value,\n          amount: amount.value\n        });\n      }, 300);\n    };\n\n    // Log events\n    const logEvent = (message, data = null) => {\n      const event = {\n        timestamp: new Date().toISOString(),\n        message,\n        data\n      };\n      events.value.unshift(event); // Add to beginning to show newest first\n    };\n\n    // Submit form\n    const submitForm = async () => {\n      counter.value++;\n      const formData = {\n        counter: counter.value,\n        price: price.value,\n        quantity: quantity.value,\n        amount: amount.value\n      };\n\n      // Log submit event\n      logEvent('Отправка данных', {\n        submitted: formData,\n        localStorageBefore: JSON.parse(localStorage.getItem('formData') || '{}')\n      });\n      try {\n        // Simulate backend request with 1 second delay\n        const response = await mockBackendRequest(formData);\n\n        // Log response\n        logEvent('Ответ от сервера', {\n          response,\n          localStorageAfter: JSON.parse(localStorage.getItem('formData') || '{}')\n        });\n      } catch (error) {\n        logEvent('Ошибка при отправке', {\n          error: error.message\n        });\n      }\n    };\n\n    // Mock backend request\n    const mockBackendRequest = data => {\n      return new Promise((resolve, reject) => {\n        setTimeout(() => {\n          const isSuccess = data.amount % 2 === 0;\n          if (isSuccess) {\n            localStorage.setItem('formData', JSON.stringify(data));\n            resolve({\n              success: true\n            });\n          } else {\n            reject({\n              success: false,\n              message: 'Amount is not even'\n            });\n          }\n        }, 1000);\n      });\n    };\n    return {\n      price,\n      quantity,\n      amount,\n      counter,\n      events,\n      localStorageState,\n      debounceInput,\n      submitForm\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","components","setup","price","quantity","amount","counter","events","debounceTimer","localStorageState","JSON","parse","localStorage","getItem","calculateFields","changedField","value","debounceInput","field","clearTimeout","setTimeout","logEvent","message","data","event","timestamp","Date","toISOString","unshift","submitForm","formData","submitted","localStorageBefore","response","mockBackendRequest","localStorageAfter","error","Promise","resolve","reject","isSuccess","setItem","stringify","success"],"sources":["/Users/kirill/WebstormProjects/test-app/src/App.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <h1>Vue3 Form with Event Logging</h1>\n\n    <div class=\"form-container\">\n      <div class=\"form-group\">\n        <label for=\"price\">Цена:</label>\n        <input\n            id=\"price\"\n            v-model.number=\"price\"\n            type=\"number\"\n            @input=\"debounceInput('price')\"\n        >\n        <div class=\"value-label\">Текущее значение: {{ price }}</div>\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"quantity\">Кол-во:</label>\n        <input\n            id=\"quantity\"\n            v-model.number=\"quantity\"\n            type=\"number\"\n            @input=\"debounceInput('quantity')\"\n        >\n        <div class=\"value-label\">Текущее значение: {{ quantity }}</div>\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"amount\">Сумма:</label>\n        <input\n            id=\"amount\"\n            v-model.number=\"amount\"\n            type=\"number\"\n            @input=\"debounceInput('amount')\"\n        >\n        <div class=\"value-label\">Текущее значение: {{ amount }}</div>\n      </div>\n\n      <button @click=\"submitForm\">Отправить данные</button>\n\n      <div class=\"storage-info\">\n        <h3>Состояние localStorage:</h3>\n        <pre>{{ localStorageState }}</pre>\n      </div>\n    </div>\n\n<!--    <EventLog :events=\"events\" />-->\n  </div>\n</template>\n\n<script>\nimport { ref, computed } from 'vue'\n// import EventLog from './components/EventLog.vue'\n\nexport default {\n  components: {\n    // EventLog\n  },\n  setup() {\n    const price = ref(0)\n    const quantity = ref(0)\n    const amount = ref(0)\n    const counter = ref(0)\n    const events = ref([])\n    let debounceTimer = null\n\n    const localStorageState = computed(() => {\n      return JSON.parse(localStorage.getItem('formData') || '{}')\n    })\n\n    // Calculate dependent fields\n    const calculateFields = (changedField) => {\n      if (changedField === 'price') {\n        if (quantity.value) {\n          amount.value = price.value * quantity.value\n        } else if (amount.value) {\n          quantity.value = amount.value / price.value\n        }\n      } else if (changedField === 'quantity') {\n        if (price.value) {\n          amount.value = price.value * quantity.value\n        } else if (amount.value) {\n          price.value = amount.value / quantity.value\n        }\n      } else if (changedField === 'amount') {\n        if (price.value) {\n          quantity.value = amount.value / price.value\n        } else if (quantity.value) {\n          price.value = amount.value / quantity.value\n        }\n      }\n    }\n\n    // Debounce input changes\n    const debounceInput = (field) => {\n      clearTimeout(debounceTimer)\n      debounceTimer = setTimeout(() => {\n        calculateFields(field)\n        logEvent(`Изменено поле: ${field}`, {\n          price: price.value,\n          quantity: quantity.value,\n          amount: amount.value\n        })\n      }, 300)\n    }\n\n    // Log events\n    const logEvent = (message, data = null) => {\n      const event = {\n        timestamp: new Date().toISOString(),\n        message,\n        data\n      }\n      events.value.unshift(event) // Add to beginning to show newest first\n    }\n\n    // Submit form\n    const submitForm = async () => {\n      counter.value++\n      const formData = {\n        counter: counter.value,\n        price: price.value,\n        quantity: quantity.value,\n        amount: amount.value\n      }\n\n      // Log submit event\n      logEvent('Отправка данных', {\n        submitted: formData,\n        localStorageBefore: JSON.parse(localStorage.getItem('formData') || '{}')\n      })\n\n      try {\n        // Simulate backend request with 1 second delay\n        const response = await mockBackendRequest(formData)\n\n        // Log response\n        logEvent('Ответ от сервера', {\n          response,\n          localStorageAfter: JSON.parse(localStorage.getItem('formData') || '{}')\n        })\n      } catch (error) {\n        logEvent('Ошибка при отправке', { error: error.message })\n      }\n    }\n\n    // Mock backend request\n    const mockBackendRequest = (data) => {\n      return new Promise((resolve, reject) => {\n        setTimeout(() => {\n          const isSuccess = data.amount % 2 === 0\n\n          if (isSuccess) {\n            localStorage.setItem('formData', JSON.stringify(data))\n            resolve({ success: true })\n          } else {\n            reject({ success: false, message: 'Amount is not even' })\n          }\n        }, 1000)\n      })\n    }\n\n    return {\n      price,\n      quantity,\n      amount,\n      counter,\n      events,\n      localStorageState,\n      debounceInput,\n      submitForm\n    }\n  }\n}\n</script>\n\n<style>\n.container {\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 20px;\n  font-family: Arial, sans-serif;\n}\n\n.form-container {\n  background: #f5f5f5;\n  padding: 20px;\n  border-radius: 8px;\n  margin-bottom: 20px;\n}\n\n.form-group {\n  margin-bottom: 15px;\n}\n\nlabel {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: bold;\n}\n\ninput {\n  width: 100%;\n  padding: 8px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  box-sizing: border-box;\n}\n\nbutton {\n  background: #4CAF50;\n  color: white;\n  padding: 10px 15px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 16px;\n  margin-top: 10px;\n}\n\nbutton:hover {\n  background: #45a049;\n}\n\n.value-label {\n  margin-top: 5px;\n  font-size: 0.9em;\n  color: #666;\n}\n\n.storage-info {\n  margin-top: 20px;\n  padding: 10px;\n  background: #e9e9e9;\n  border-radius: 4px;\n}\n\npre {\n  background: white;\n  padding: 10px;\n  border-radius: 4px;\n  overflow-x: auto;\n}\n</style>\n<!--<template>-->\n<!--  <section>-->\n<!--    <form class=\"form\">-->\n<!--      <div class=\"form__input\">-->\n<!--        <input id=\"price\" v-model=\"price\" type=\"number\" @input=\"changeAmount\" />-->\n<!--        <label for=\"price\">Цена</label>-->\n<!--      </div>-->\n<!--      <div class=\"form__input\">-->\n<!--        <input id=\"quantity\" v-model=\"quantity\" type=\"number\" @input=\"changeAmount\" />-->\n<!--        <label for=\"quantity\">Количество</label>-->\n<!--      </div>-->\n<!--      <div class=\"form__input\">-->\n<!--        <input id=\"amount\" v-model=\"amount\" readonly />-->\n<!--        <label for=\"amount\">Сумма</label>-->\n<!--      </div>-->\n<!--      <button>Отправить</button>-->\n<!--    </form>-->\n<!--    <div>{{localStorage}}</div>-->\n<!--  </section>-->\n<!--</template>-->\n\n<!--<script setup>-->\n\n<!--import {ref} from \"vue\";-->\n\n<!--const price = ref(0);-->\n<!--const quantity = ref(0);-->\n<!--let amount = ref(0);-->\n\n<!--const changeAmount = () => {-->\n<!-- amount = price.value * quantity.value-->\n<!--}-->\n<!--</script>-->\n\n<!--<style lang=\"scss\">-->\n<!--#app {-->\n<!--  font-family: Avenir, Helvetica, Arial, sans-serif;-->\n<!--  -webkit-font-smoothing: antialiased;-->\n<!--  -moz-osx-font-smoothing: grayscale;-->\n<!--  text-align: center;-->\n<!--  color: #2c3e50;-->\n<!--  margin-top: 60px;-->\n<!--}-->\n\n<!--.form {-->\n<!--  display: flex;-->\n<!--  column-gap: 10px;-->\n\n<!--  &__input {-->\n<!--    display: flex;-->\n<!--    flex-direction: column;-->\n<!--  }-->\n<!--}-->\n<!--</style>-->\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}