{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"form-container\"\n};\nconst _hoisted_3 = {\n  class: \"form-group\"\n};\nconst _hoisted_4 = {\n  class: \"value-label\"\n};\nconst _hoisted_5 = {\n  class: \"form-group\"\n};\nconst _hoisted_6 = {\n  class: \"value-label\"\n};\nconst _hoisted_7 = {\n  class: \"form-group\"\n};\nconst _hoisted_8 = {\n  class: \"value-label\"\n};\nconst _hoisted_9 = {\n  class: \"storage-info\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[11] || (_cache[11] = _createElementVNode(\"h1\", null, \"Vue3 Form with Event Logging\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    for: \"price\"\n  }, \"Цена:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    id: \"price\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.price = $event),\n    type: \"number\",\n    onInput: _cache[1] || (_cache[1] = $event => $setup.debounceInput('price'))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.price, void 0, {\n    number: true\n  }]]), _createElementVNode(\"div\", _hoisted_4, \"Текущее значение: \" + _toDisplayString($setup.price), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_5, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", {\n    for: \"quantity\"\n  }, \"Кол-во:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    id: \"quantity\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.quantity = $event),\n    type: \"number\",\n    onInput: _cache[3] || (_cache[3] = $event => $setup.debounceInput('quantity'))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.quantity, void 0, {\n    number: true\n  }]]), _createElementVNode(\"div\", _hoisted_6, \"Текущее значение: \" + _toDisplayString($setup.quantity), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_7, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", {\n    for: \"amount\"\n  }, \"Сумма:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    id: \"amount\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.amount = $event),\n    type: \"number\",\n    onInput: _cache[5] || (_cache[5] = $event => $setup.debounceInput('amount'))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.amount, void 0, {\n    number: true\n  }]]), _createElementVNode(\"div\", _hoisted_8, \"Текущее значение: \" + _toDisplayString($setup.amount), 1 /* TEXT */)]), _createElementVNode(\"button\", {\n    onClick: _cache[6] || (_cache[6] = (...args) => $setup.submitForm && $setup.submitForm(...args))\n  }, \"Отправить данные\"), _createElementVNode(\"div\", _hoisted_9, [_cache[10] || (_cache[10] = _createElementVNode(\"h3\", null, \"Состояние localStorage:\", -1 /* HOISTED */)), _createElementVNode(\"pre\", null, _toDisplayString($setup.localStorageState), 1 /* TEXT */)])]), _createCommentVNode(\"    <EventLog :events=\\\"events\\\" />\")]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","for","id","_cache","$event","$setup","price","type","onInput","debounceInput","number","_hoisted_4","_toDisplayString","_hoisted_5","quantity","_hoisted_6","_hoisted_7","amount","_hoisted_8","onClick","args","submitForm","_hoisted_9","localStorageState","_createCommentVNode"],"sources":["/Users/kirill/WebstormProjects/test-app/src/App.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <h1>Vue3 Form with Event Logging</h1>\n\n    <div class=\"form-container\">\n      <div class=\"form-group\">\n        <label for=\"price\">Цена:</label>\n        <input\n            id=\"price\"\n            v-model.number=\"price\"\n            type=\"number\"\n            @input=\"debounceInput('price')\"\n        >\n        <div class=\"value-label\">Текущее значение: {{ price }}</div>\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"quantity\">Кол-во:</label>\n        <input\n            id=\"quantity\"\n            v-model.number=\"quantity\"\n            type=\"number\"\n            @input=\"debounceInput('quantity')\"\n        >\n        <div class=\"value-label\">Текущее значение: {{ quantity }}</div>\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"amount\">Сумма:</label>\n        <input\n            id=\"amount\"\n            v-model.number=\"amount\"\n            type=\"number\"\n            @input=\"debounceInput('amount')\"\n        >\n        <div class=\"value-label\">Текущее значение: {{ amount }}</div>\n      </div>\n\n      <button @click=\"submitForm\">Отправить данные</button>\n\n      <div class=\"storage-info\">\n        <h3>Состояние localStorage:</h3>\n        <pre>{{ localStorageState }}</pre>\n      </div>\n    </div>\n\n<!--    <EventLog :events=\"events\" />-->\n  </div>\n</template>\n\n<script>\nimport { ref, computed } from 'vue'\n// import EventLog from './components/EventLog.vue'\n\nexport default {\n  components: {\n    // EventLog\n  },\n  setup() {\n    const price = ref(0)\n    const quantity = ref(0)\n    const amount = ref(0)\n    const counter = ref(0)\n    const events = ref([])\n    let debounceTimer = null\n\n    const localStorageState = computed(() => {\n      return JSON.parse(localStorage.getItem('formData') || '{}')\n    })\n\n    // Calculate dependent fields\n    const calculateFields = (changedField) => {\n      if (changedField === 'price') {\n        if (quantity.value) {\n          amount.value = price.value * quantity.value\n        } else if (amount.value) {\n          quantity.value = amount.value / price.value\n        }\n      } else if (changedField === 'quantity') {\n        if (price.value) {\n          amount.value = price.value * quantity.value\n        } else if (amount.value) {\n          price.value = amount.value / quantity.value\n        }\n      } else if (changedField === 'amount') {\n        if (price.value) {\n          quantity.value = amount.value / price.value\n        } else if (quantity.value) {\n          price.value = amount.value / quantity.value\n        }\n      }\n    }\n\n    // Debounce input changes\n    const debounceInput = (field) => {\n      clearTimeout(debounceTimer)\n      debounceTimer = setTimeout(() => {\n        calculateFields(field)\n        logEvent(`Изменено поле: ${field}`, {\n          price: price.value,\n          quantity: quantity.value,\n          amount: amount.value\n        })\n      }, 300)\n    }\n\n    // Log events\n    const logEvent = (message, data = null) => {\n      const event = {\n        timestamp: new Date().toISOString(),\n        message,\n        data\n      }\n      events.value.unshift(event) // Add to beginning to show newest first\n    }\n\n    // Submit form\n    const submitForm = async () => {\n      counter.value++\n      const formData = {\n        counter: counter.value,\n        price: price.value,\n        quantity: quantity.value,\n        amount: amount.value\n      }\n\n      // Log submit event\n      logEvent('Отправка данных', {\n        submitted: formData,\n        localStorageBefore: JSON.parse(localStorage.getItem('formData') || '{}')\n      })\n\n      try {\n        // Simulate backend request with 1 second delay\n        const response = await mockBackendRequest(formData)\n\n        // Log response\n        logEvent('Ответ от сервера', {\n          response,\n          localStorageAfter: JSON.parse(localStorage.getItem('formData') || '{}')\n        })\n      } catch (error) {\n        logEvent('Ошибка при отправке', { error: error.message })\n      }\n    }\n\n    // Mock backend request\n    const mockBackendRequest = (data) => {\n      return new Promise((resolve, reject) => {\n        setTimeout(() => {\n          const isSuccess = data.amount % 2 === 0\n\n          if (isSuccess) {\n            localStorage.setItem('formData', JSON.stringify(data))\n            resolve({ success: true })\n          } else {\n            reject({ success: false, message: 'Amount is not even' })\n          }\n        }, 1000)\n      })\n    }\n\n    return {\n      price,\n      quantity,\n      amount,\n      counter,\n      events,\n      localStorageState,\n      debounceInput,\n      submitForm\n    }\n  }\n}\n</script>\n\n<style>\n.container {\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 20px;\n  font-family: Arial, sans-serif;\n}\n\n.form-container {\n  background: #f5f5f5;\n  padding: 20px;\n  border-radius: 8px;\n  margin-bottom: 20px;\n}\n\n.form-group {\n  margin-bottom: 15px;\n}\n\nlabel {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: bold;\n}\n\ninput {\n  width: 100%;\n  padding: 8px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  box-sizing: border-box;\n}\n\nbutton {\n  background: #4CAF50;\n  color: white;\n  padding: 10px 15px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 16px;\n  margin-top: 10px;\n}\n\nbutton:hover {\n  background: #45a049;\n}\n\n.value-label {\n  margin-top: 5px;\n  font-size: 0.9em;\n  color: #666;\n}\n\n.storage-info {\n  margin-top: 20px;\n  padding: 10px;\n  background: #e9e9e9;\n  border-radius: 4px;\n}\n\npre {\n  background: white;\n  padding: 10px;\n  border-radius: 4px;\n  overflow-x: auto;\n}\n</style>\n<!--<template>-->\n<!--  <section>-->\n<!--    <form class=\"form\">-->\n<!--      <div class=\"form__input\">-->\n<!--        <input id=\"price\" v-model=\"price\" type=\"number\" @input=\"changeAmount\" />-->\n<!--        <label for=\"price\">Цена</label>-->\n<!--      </div>-->\n<!--      <div class=\"form__input\">-->\n<!--        <input id=\"quantity\" v-model=\"quantity\" type=\"number\" @input=\"changeAmount\" />-->\n<!--        <label for=\"quantity\">Количество</label>-->\n<!--      </div>-->\n<!--      <div class=\"form__input\">-->\n<!--        <input id=\"amount\" v-model=\"amount\" readonly />-->\n<!--        <label for=\"amount\">Сумма</label>-->\n<!--      </div>-->\n<!--      <button>Отправить</button>-->\n<!--    </form>-->\n<!--    <div>{{localStorage}}</div>-->\n<!--  </section>-->\n<!--</template>-->\n\n<!--<script setup>-->\n\n<!--import {ref} from \"vue\";-->\n\n<!--const price = ref(0);-->\n<!--const quantity = ref(0);-->\n<!--let amount = ref(0);-->\n\n<!--const changeAmount = () => {-->\n<!-- amount = price.value * quantity.value-->\n<!--}-->\n<!--</script>-->\n\n<!--<style lang=\"scss\">-->\n<!--#app {-->\n<!--  font-family: Avenir, Helvetica, Arial, sans-serif;-->\n<!--  -webkit-font-smoothing: antialiased;-->\n<!--  -moz-osx-font-smoothing: grayscale;-->\n<!--  text-align: center;-->\n<!--  color: #2c3e50;-->\n<!--  margin-top: 60px;-->\n<!--}-->\n\n<!--.form {-->\n<!--  display: flex;-->\n<!--  column-gap: 10px;-->\n\n<!--  &__input {-->\n<!--    display: flex;-->\n<!--    flex-direction: column;-->\n<!--  }-->\n<!--}-->\n<!--</style>-->\n"],"mappings":";;EACOA,KAAK,EAAC;AAAW;;EAGfA,KAAK,EAAC;AAAgB;;EACpBA,KAAK,EAAC;AAAY;;EAQhBA,KAAK,EAAC;AAAa;;EAGrBA,KAAK,EAAC;AAAY;;EAQhBA,KAAK,EAAC;AAAa;;EAGrBA,KAAK,EAAC;AAAY;;EAQhBA,KAAK,EAAC;AAAa;;EAKrBA,KAAK,EAAC;AAAc;;uBAvC7BC,mBAAA,CA8CM,OA9CNC,UA8CM,G,4BA7CJC,mBAAA,CAAqC,YAAjC,8BAA4B,sBAEhCA,mBAAA,CAwCM,OAxCNC,UAwCM,GAvCJD,mBAAA,CASM,OATNE,UASM,G,0BARJF,mBAAA,CAAgC;IAAzBG,GAAG,EAAC;EAAO,GAAC,OAAK,sB,gBACxBH,mBAAA,CAKC;IAJGI,EAAE,EAAC,OAAO;IARtB,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAS4BC,MAAA,CAAAC,KAAK,GAAAF,MAAA;IACrBG,IAAI,EAAC,QAAQ;IACZC,OAAK,EAAAL,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAI,aAAa;iEAFLJ,MAAA,CAAAC,KAAK,E;IAAbI,MAAM,EAAd;EAAsB,E,IAI1BZ,mBAAA,CAA4D,OAA5Da,UAA4D,EAAnC,oBAAkB,GAAAC,gBAAA,CAAGP,MAAA,CAAAC,KAAK,iB,GAGrDR,mBAAA,CASM,OATNe,UASM,G,0BARJf,mBAAA,CAAqC;IAA9BG,GAAG,EAAC;EAAU,GAAC,SAAO,sB,gBAC7BH,mBAAA,CAKC;IAJGI,EAAE,EAAC,UAAU;IAnBzB,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAoB4BC,MAAA,CAAAS,QAAQ,GAAAV,MAAA;IACxBG,IAAI,EAAC,QAAQ;IACZC,OAAK,EAAAL,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAI,aAAa;iEAFLJ,MAAA,CAAAS,QAAQ,E;IAAhBJ,MAAM,EAAd;EAAyB,E,IAI7BZ,mBAAA,CAA+D,OAA/DiB,UAA+D,EAAtC,oBAAkB,GAAAH,gBAAA,CAAGP,MAAA,CAAAS,QAAQ,iB,GAGxDhB,mBAAA,CASM,OATNkB,UASM,G,0BARJlB,mBAAA,CAAkC;IAA3BG,GAAG,EAAC;EAAQ,GAAC,QAAM,sB,gBAC1BH,mBAAA,CAKC;IAJGI,EAAE,EAAC,QAAQ;IA9BvB,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IA+B4BC,MAAA,CAAAY,MAAM,GAAAb,MAAA;IACtBG,IAAI,EAAC,QAAQ;IACZC,OAAK,EAAAL,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAI,aAAa;iEAFLJ,MAAA,CAAAY,MAAM,E;IAAdP,MAAM,EAAd;EAAuB,E,IAI3BZ,mBAAA,CAA6D,OAA7DoB,UAA6D,EAApC,oBAAkB,GAAAN,gBAAA,CAAGP,MAAA,CAAAY,MAAM,iB,GAGtDnB,mBAAA,CAAqD;IAA5CqB,OAAK,EAAAhB,MAAA,QAAAA,MAAA,UAAAiB,IAAA,KAAEf,MAAA,CAAAgB,UAAA,IAAAhB,MAAA,CAAAgB,UAAA,IAAAD,IAAA,CAAU;KAAE,kBAAgB,GAE5CtB,mBAAA,CAGM,OAHNwB,UAGM,G,4BAFJxB,mBAAA,CAAgC,YAA5B,yBAAuB,sBAC3BA,mBAAA,CAAkC,aAAAc,gBAAA,CAA1BP,MAAA,CAAAkB,iBAAiB,iB,KAIjCC,mBAAA,uCAAwC,C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}