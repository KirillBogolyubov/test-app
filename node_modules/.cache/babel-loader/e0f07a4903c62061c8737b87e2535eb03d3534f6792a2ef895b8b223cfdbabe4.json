{"ast":null,"code":"import { computed, ref } from \"vue\";\n// import HelloWorld from \"@/components/HelloWorld.vue\";\n\nexport default {\n  __name: 'App',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const price = ref(0);\n    const quantity = ref(0);\n    let amount = ref(0);\n    const events = ref([]);\n    // let debounceTimer = null\n    const localStorageData = computed(() => {\n      return JSON.parse(localStorage.getItem('data') || '{}');\n    });\n    const calculateFields = changedField => {\n      if (changedField === 'price') {\n        amount.value = price.value * quantity.value;\n      } else if (changedField === 'quantity') {\n        amount.value = price.value * quantity.value;\n      } else if (changedField === 'amount') {\n        if (price.value) {\n          quantity.value = amount.value / price.value;\n        } else if (quantity.value) {\n          price.value = amount.value / quantity.value;\n        }\n      }\n    };\n    const debounceInputField = field => {\n      setTimeout(() => {\n        calculateFields(field);\n        logEvent(`Изменено поле: ${field}`, {\n          price: price.value,\n          quantity: quantity.value,\n          amount: amount.value\n        });\n      }, 300);\n    };\n    const logEvent = (message, data = null) => {\n      const event = {\n        timestamp: new Date().toISOString(),\n        message,\n        data\n      };\n      events.value.unshift(event);\n    };\n    const postAmount = () => {\n      const data = {\n        price: price.value,\n        quantity: quantity.value,\n        amount: amount.value\n      };\n      localStorage.setItem('data', JSON.stringify(data));\n    };\n    const __returned__ = {\n      price,\n      quantity,\n      get amount() {\n        return amount;\n      },\n      set amount(v) {\n        amount = v;\n      },\n      events,\n      localStorageData,\n      calculateFields,\n      debounceInputField,\n      logEvent,\n      postAmount,\n      computed,\n      ref\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["computed","ref","price","quantity","amount","events","localStorageData","JSON","parse","localStorage","getItem","calculateFields","changedField","value","debounceInputField","field","setTimeout","logEvent","message","data","event","timestamp","Date","toISOString","unshift","postAmount","setItem","stringify"],"sources":["/Users/kirill/WebstormProjects/test-app/src/App.vue"],"sourcesContent":["<template>\n  <section>\n    <form class=\"form\">\n      <div class=\"form__input\">\n        <input id=\"price\" v-model=\"price\" type=\"number\" @input=\"debounceInputField('price')\" />\n        <label for=\"price\">Цена</label>\n      </div>\n      <div class=\"form__input\">\n        <input id=\"quantity\" v-model=\"quantity\" type=\"number\" @input=\"debounceInputField('quantity')\" />\n        <label for=\"quantity\">Количество</label>\n      </div>\n      <div class=\"form__input\">\n        <input id=\"amount\" v-model=\"amount\" @input=\"debounceInputField('amount')\" />\n        <label for=\"amount\">Сумма</label>\n      </div>\n      <button @click=\"postAmount\">Отправить</button>\n    </form>\n    <div>localStorage: {{localStorageData}}</div>\n    <div v-for=\"(item, index) in events\" :key=\"index\">{{item.message}}</div>\n<!--    <HelloWorld />-->\n  </section>\n</template>\n\n<script setup>\n\nimport {computed, ref} from \"vue\";\n// import HelloWorld from \"@/components/HelloWorld.vue\";\n\nconst price = ref(0);\nconst quantity = ref(0);\nlet amount = ref(0);\nconst events = ref([])\n// let debounceTimer = null\nconst localStorageData = computed(() => {\n  return JSON.parse(localStorage.getItem('data') || '{}')\n})\n\n\nconst calculateFields = (changedField) => {\n  if (changedField === 'price') {\n      amount.value = price.value * quantity.value\n  } else if (changedField === 'quantity') {\n      amount.value = price.value * quantity.value\n  } else if (changedField === 'amount') {\n    if (price.value) {\n      quantity.value = amount.value / price.value\n    } else if (quantity.value) {\n      price.value = amount.value / quantity.value\n    }\n  }\n}\n\nconst debounceInputField = (field) => {\n  setTimeout(() => {\n    calculateFields(field)\n    logEvent(`Изменено поле: ${field}`, {\n      price: price.value,\n      quantity: quantity.value,\n      amount: amount.value\n    })\n  }, 300)\n}\n\nconst logEvent = (message, data = null) => {\n  const event = {\n    timestamp: new Date().toISOString(),\n    message,\n    data\n  }\n  events.value.unshift(event)\n}\n\nconst postAmount = () => {\n  const data = {\n    price: price.value,\n    quantity: quantity.value,\n    amount: amount.value,\n  }\n  localStorage.setItem('data', JSON.stringify(data))\n}\n</script>\n\n<style lang=\"scss\">\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n\n.form {\n  display: flex;\n  column-gap: 10px;\n  margin-bottom: 20px;\n\n  &__input {\n    display: flex;\n    flex-direction: column;\n  }\n}\n</style>\n"],"mappings":"AAyBA,SAAQA,QAAQ,EAAEC,GAAG,QAAO,KAAK;AACjC;;;;;;;;IAEA,MAAMC,KAAK,GAAGD,GAAG,CAAC,CAAC,CAAC;IACpB,MAAME,QAAQ,GAAGF,GAAG,CAAC,CAAC,CAAC;IACvB,IAAIG,MAAM,GAAGH,GAAG,CAAC,CAAC,CAAC;IACnB,MAAMI,MAAM,GAAGJ,GAAG,CAAC,EAAE;IACrB;IACA,MAAMK,gBAAgB,GAAGN,QAAQ,CAAC,MAAM;MACtC,OAAOO,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,IAAI,IAAI;IACxD,CAAC;IAGD,MAAMC,eAAe,GAAIC,YAAY,IAAK;MACxC,IAAIA,YAAY,KAAK,OAAO,EAAE;QAC1BR,MAAM,CAACS,KAAK,GAAGX,KAAK,CAACW,KAAK,GAAGV,QAAQ,CAACU,KAAI;MAC9C,CAAC,MAAM,IAAID,YAAY,KAAK,UAAU,EAAE;QACpCR,MAAM,CAACS,KAAK,GAAGX,KAAK,CAACW,KAAK,GAAGV,QAAQ,CAACU,KAAI;MAC9C,CAAC,MAAM,IAAID,YAAY,KAAK,QAAQ,EAAE;QACpC,IAAIV,KAAK,CAACW,KAAK,EAAE;UACfV,QAAQ,CAACU,KAAK,GAAGT,MAAM,CAACS,KAAK,GAAGX,KAAK,CAACW,KAAI;QAC5C,CAAC,MAAM,IAAIV,QAAQ,CAACU,KAAK,EAAE;UACzBX,KAAK,CAACW,KAAK,GAAGT,MAAM,CAACS,KAAK,GAAGV,QAAQ,CAACU,KAAI;QAC5C;MACF;IACF;IAEA,MAAMC,kBAAkB,GAAIC,KAAK,IAAK;MACpCC,UAAU,CAAC,MAAM;QACfL,eAAe,CAACI,KAAK;QACrBE,QAAQ,CAAC,kBAAkBF,KAAK,EAAE,EAAE;UAClCb,KAAK,EAAEA,KAAK,CAACW,KAAK;UAClBV,QAAQ,EAAEA,QAAQ,CAACU,KAAK;UACxBT,MAAM,EAAEA,MAAM,CAACS;QACjB,CAAC;MACH,CAAC,EAAE,GAAG;IACR;IAEA,MAAMI,QAAQ,GAAGA,CAACC,OAAO,EAAEC,IAAI,GAAG,IAAI,KAAK;MACzC,MAAMC,KAAK,GAAG;QACZC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;QACnCL,OAAO;QACPC;MACF;MACAd,MAAM,CAACQ,KAAK,CAACW,OAAO,CAACJ,KAAK;IAC5B;IAEA,MAAMK,UAAU,GAAGA,CAAA,KAAM;MACvB,MAAMN,IAAI,GAAG;QACXjB,KAAK,EAAEA,KAAK,CAACW,KAAK;QAClBV,QAAQ,EAAEA,QAAQ,CAACU,KAAK;QACxBT,MAAM,EAAEA,MAAM,CAACS;MACjB;MACAJ,YAAY,CAACiB,OAAO,CAAC,MAAM,EAAEnB,IAAI,CAACoB,SAAS,CAACR,IAAI,CAAC;IACnD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}