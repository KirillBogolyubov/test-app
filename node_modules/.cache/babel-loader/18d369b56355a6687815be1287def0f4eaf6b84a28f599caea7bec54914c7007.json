{"ast":null,"code":"import { ref } from \"vue\";\nimport HelloWorld from \"@/components/HelloWorld.vue\";\nexport default {\n  __name: 'App',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const price = ref(0);\n    const quantity = ref(0);\n    let amount = ref(0);\n    // const events = ref([])\n    let debounceTimer = null;\n    const calculateFields = changedField => {\n      if (changedField === 'price') {\n        amount.value = price.value * quantity.value;\n      } else if (changedField === 'quantity') {\n        amount.value = price.value * quantity.value;\n      } else if (changedField === 'amount') {\n        if (price.value) {\n          quantity.value = amount.value / price.value;\n        } else if (quantity.value) {\n          price.value = amount.value / quantity.value;\n        }\n      }\n    };\n    const debounceInput = field => {\n      clearTimeout(debounceTimer);\n      setTimeout(() => {\n        calculateFields(field);\n        // logEvent(`Изменено поле: ${field}`, {\n        //   price: price.value,\n        //   quantity: quantity.value,\n        //   amount: amount.value\n        // })\n      }, 300);\n    };\n\n    // const logEvent = (message, data = null) => {\n    //   const event = {\n    //     timestamp: new Date().toISOString(),\n    //     message,\n    //     data\n    //   }\n    //   events.value.unshift(event) // Add to beginning to show newest first\n    // }\n    // const changeAmount = () => {\n    //   clearTimeout(debounceTimer)\n    //  amount = price.value * quantity.value\n    // }\n\n    const __returned__ = {\n      price,\n      quantity,\n      get amount() {\n        return amount;\n      },\n      set amount(v) {\n        amount = v;\n      },\n      get debounceTimer() {\n        return debounceTimer;\n      },\n      set debounceTimer(v) {\n        debounceTimer = v;\n      },\n      calculateFields,\n      debounceInput,\n      ref,\n      HelloWorld\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","HelloWorld","price","quantity","amount","debounceTimer","calculateFields","changedField","value","debounceInput","field","clearTimeout","setTimeout"],"sources":["/Users/kirill/WebstormProjects/test-app/src/App.vue"],"sourcesContent":["<template>\n  <section>\n    <form class=\"form\">\n      <div class=\"form__input\">\n        <input id=\"price\" v-model=\"price\" type=\"number\" @input=\"debounceInput('price')\" />\n        <label for=\"price\">Цена</label>\n      </div>\n      <div class=\"form__input\">\n        <input id=\"quantity\" v-model=\"quantity\" type=\"number\" @input=\"debounceInput('quantity')\" />\n        <label for=\"quantity\">Количество</label>\n      </div>\n      <div class=\"form__input\">\n        <input id=\"amount\" v-model=\"amount\"  @input=\"debounceInput('quantity')\"/>\n        <label for=\"amount\">Сумма</label>\n      </div>\n      <button>Отправить</button>\n    </form>\n    <div>{{localStorage}}</div>\n    <HelloWorld />\n  </section>\n</template>\n\n<script setup>\n\nimport {ref} from \"vue\";\nimport HelloWorld from \"@/components/HelloWorld.vue\";\n\nconst price = ref(0);\nconst quantity = ref(0);\nlet amount = ref(0);\n// const events = ref([])\nlet debounceTimer = null\n\nconst calculateFields = (changedField) => {\n  if (changedField === 'price') {\n      amount.value = price.value * quantity.value\n  } else if (changedField === 'quantity') {\n      amount.value = price.value * quantity.value\n  } else if (changedField === 'amount') {\n    if (price.value) {\n      quantity.value = amount.value / price.value\n    } else if (quantity.value) {\n      price.value = amount.value / quantity.value\n    }\n  }\n}\n\nconst debounceInput = (field) => {\n  clearTimeout(debounceTimer)\n  setTimeout(() => {\n    calculateFields(field)\n    // logEvent(`Изменено поле: ${field}`, {\n    //   price: price.value,\n    //   quantity: quantity.value,\n    //   amount: amount.value\n    // })\n  }, 300)\n}\n\n// const logEvent = (message, data = null) => {\n//   const event = {\n//     timestamp: new Date().toISOString(),\n//     message,\n//     data\n//   }\n//   events.value.unshift(event) // Add to beginning to show newest first\n// }\n// const changeAmount = () => {\n//   clearTimeout(debounceTimer)\n//  amount = price.value * quantity.value\n// }\n</script>\n\n<style lang=\"scss\">\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n\n.form {\n  display: flex;\n  column-gap: 10px;\n\n  &__input {\n    display: flex;\n    flex-direction: column;\n  }\n}\n</style>\n"],"mappings":"AAwBA,SAAQA,GAAG,QAAO,KAAK;AACvB,OAAOC,UAAU,MAAM,6BAA6B;;;;;;;IAEpD,MAAMC,KAAK,GAAGF,GAAG,CAAC,CAAC,CAAC;IACpB,MAAMG,QAAQ,GAAGH,GAAG,CAAC,CAAC,CAAC;IACvB,IAAII,MAAM,GAAGJ,GAAG,CAAC,CAAC,CAAC;IACnB;IACA,IAAIK,aAAa,GAAG,IAAG;IAEvB,MAAMC,eAAe,GAAIC,YAAY,IAAK;MACxC,IAAIA,YAAY,KAAK,OAAO,EAAE;QAC1BH,MAAM,CAACI,KAAK,GAAGN,KAAK,CAACM,KAAK,GAAGL,QAAQ,CAACK,KAAI;MAC9C,CAAC,MAAM,IAAID,YAAY,KAAK,UAAU,EAAE;QACpCH,MAAM,CAACI,KAAK,GAAGN,KAAK,CAACM,KAAK,GAAGL,QAAQ,CAACK,KAAI;MAC9C,CAAC,MAAM,IAAID,YAAY,KAAK,QAAQ,EAAE;QACpC,IAAIL,KAAK,CAACM,KAAK,EAAE;UACfL,QAAQ,CAACK,KAAK,GAAGJ,MAAM,CAACI,KAAK,GAAGN,KAAK,CAACM,KAAI;QAC5C,CAAC,MAAM,IAAIL,QAAQ,CAACK,KAAK,EAAE;UACzBN,KAAK,CAACM,KAAK,GAAGJ,MAAM,CAACI,KAAK,GAAGL,QAAQ,CAACK,KAAI;QAC5C;MACF;IACF;IAEA,MAAMC,aAAa,GAAIC,KAAK,IAAK;MAC/BC,YAAY,CAACN,aAAa;MAC1BO,UAAU,CAAC,MAAM;QACfN,eAAe,CAACI,KAAK;QACrB;QACA;QACA;QACA;QACA;MACF,CAAC,EAAE,GAAG;IACR;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}